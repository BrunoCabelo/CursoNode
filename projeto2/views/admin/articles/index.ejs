<%- include('../../partials/header.ejs') %>
<body>
    <%- include ('../../partials/navbar.ejs')     %>
    
    <div class="container">
        <br>
        <h2>Artigos</h2>
        <a href="/admin/articles/new" class="btn btn-success">Criar novo artigo</a>
        <hr>

        <% articles.forEach((article)=>{ %>
            <br>
            <div class="card">
                <div class="card-header">
                
                    <h3><%= article.title %></h3>
                    <p><%= article.category.title %></p>
                
                </div>
                <div class="card-body">
                
                <a href="/admin/articles/edit/<%= article.id %>" class="btn btn-warning">Editar</a>
                <form action="/articles/delete" method="post"  style="display: inline;" onsubmit="confirmation(event, this)">
                    <input type="hidden" name="id" value="<%= article.id %>">
                    <button class="btn btn-danger">Deletar</button>
                </form>
            </div>
            </div>
        <% }) %>
        
    </div>
    <script>
        function confirmation(event, form){
            event.preventDefault();
            var decision = confirm('Deseja deletar este artigo?');

            if(decision){
                form.submit();
            }else{

            }
        }
    </script>
    <%- include('../../partials/footer.ejs') %>
</body>
